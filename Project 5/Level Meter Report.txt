หลักการทำ Level Meter
1 เราจะใช้ การส่งโค้ดแบบ SPI บัส
2.ตั้งรับค่า xyz แบบ บัฟเฟอร์เพื่อความนิ่งของการวัด
3.เริ่มจากใช้ Calibration โดยคำณวนเมื่อ X หันบน หันล่าง ค่าต่างกันเท่าไหร่ แล้่วไปหาร 2 เพื่อหาความเร่งต่อ g กับค่าเมื่อวางแนวราบ
4. หามุมโดยใช้สูตร (ค่าxที่ได้ - xแนวราบ) /g = มุมหน่วย rad
5.ปรับมุมหน่วย rad เป็น องศาโดยใช้ นำ180มาคูณและ 3.14 ไปหาร
6. มุมจะวัดได้ ถึง 90 เท่านั้นถ้าจะมากกว่า 90 ต้องเอาค่า z มาช่วยโดยหาค่า z เมื่อ ADXL335 ตั้งฉากแล้วเข้าตัวเลือกเมื่อ z<z ที่ตั้งฉาก ให้เข้าสมการ มุม =180-มุมที่หาได้ แทน
7.จะส่งค่าเราจะส่งไปเป็นค่า char โดยวิธีคือ ถ้า z ปกติ จะให้ค่าตัวแรกเป็น 0 ค่าตัว 2 คือ มุม/10 + '0' ค่าตัว 3 คือ มุม % 10 + '0' แต่ถ้าค่า z < z ที่ตั้งฉาก ให้มุม = 180-มุมที่หาได้ ตัวที่ 1 คือd/100 +'0' ตัวที่ 2คือ (d/10)%10 + '0' ตัวที่ 3 คือ d%10)+ '0' ส่งโดยใช้ SPI.transfer
8.โค้ดรับจะให้รับเป็น Array 3 ตัวแล้ว เอา Array 3ตัวนั้นไปแสดงค่าใน Dot matrix